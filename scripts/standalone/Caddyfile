# Standalone Caddyfile — single-origin reverse proxy for local development.
# Routes:
#   /server-api/*  → FastAPI backend (server:1250)
#   /*             → Next.js frontend  (web:3000)

localhost {
	# API + WebSocket: strip /server-api prefix so FastAPI receives /v1/*, /health
	handle_path /server-api/* {
		reverse_proxy server:1250
	}

	# Everything else → frontend
	handle {
		reverse_proxy web:3000
	}
}
